# lesengen

A two-part MetaTrader 4 Expert Advisor (EA) license system written in MQL4.  
It consists of:

- **lesenGen.mq4** – a script that generates a time-limited license key based on your account number and desired validity period :contentReference[oaicite:0]{index=0}  
- **mainEA.mq4** – the protected EA that enforces license validation at startup :contentReference[oaicite:1]{index=1}  
- **LICENSE** – this project is now released under the GNU General Public License v3.0 :contentReference[oaicite:2]{index=2}

---

## Features

- **Customizable license generation**  
  - Target a real or demo account  
  - Choose validity in days, months or years  
  - Produces a 4×4-hex-block key (e.g. `ABCD-1234-FFFF-0001`)  

- **Strict license enforcement**  
  - Rejects missing or malformed keys  
  - Supports an “admin” master key for demo/testing  
  - Enforces expiry by comparing the embedded duration  

- **Easy integration**  
  - Standard MQL4 input parameters  
  - Popup confirmation when generating  
  - On-chart comments showing license status  

---

## Requirements

- MetaTrader 4 terminal  
- MQL4 compiler (built-in)  

---

## Installation

1. **Generate a license**  
   - Copy **lesenGen.mq4** into your `Scripts` (or `Indicators`) folder  
   - In MT4’s Navigator, right-click **lesenGen**, choose **Compile**, then **Run on Chart**  
   - In the popup, set:  
     - **AccountNumber** (0 for demo, or your real account number)  
     - **ValidDuration** and **TimeUnit**  
     - **ForDemoAccount** if you want a demo-only key  
   - Copy the license key shown in the MessageBox  

2. **Install the protected EA**  
   - Copy **mainEA.mq4** into your `Experts` folder  
   - Compile it in the Navigator  
   - In the EA’s **Inputs**, paste your **LicenseKey**, and set **ValidDuration**/**TimeUnit** to match  
   - Attach **mainEA** to any chart  

---

## Usage

### Generating a License

```text
• AccountNumber:    123456  
• ValidDuration:    3  
• TimeUnit:         UNIT_MONTHS  
• ForDemoAccount:   false  
```

A popup will display your key, expiry date, and instructions to copy it into the EA.

### Running the Protected EA

* If the key is valid and unexpired, the EA will initialize normally and display its remaining validity under the chart’s comment.
* If invalid or expired, the EA will show an alert and refuse to start.

---

## Configuration

### lesenGen.mq4 Inputs

| Parameter      | Type   | Default       | Description                                 |
| -------------- | ------ | ------------- | ------------------------------------------- |
| AccountNumber  | `int`  | `0`           | 0 = demo, or your real MT4 account number   |
| ValidDuration  | `int`  | `1`           | Length of license (in chosen unit)          |
| TimeUnit       | `enum` | `UNIT_MONTHS` | `UNIT_DAYS`, `UNIT_MONTHS`, or `UNIT_YEARS` |
| ForDemoAccount | `bool` | `false`       | `true` to force a demo-only license         |

### mainEA.mq4 Inputs

| Parameter     | Type     | Default       | Description                             |
| ------------- | -------- | ------------- | --------------------------------------- |
| LicenseKey    | `string` | `""`          | Paste the key generated by **lesenGen** |
| ValidDuration | `int`    | `1`           | Must match the generator’s duration     |
| TimeUnit      | `enum`   | `UNIT_MONTHS` | Must match the generator’s time unit    |

---

## Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/my-change`)
3. Commit your changes (`git commit -m "Add feature"`)
4. Push (`git push origin feature/my-change`) and open a Pull Request

---

## License

This project is licensed under the [GNU General Public License v3.0](LICENSE) ([raw.githubusercontent.com][1])

---

```
::contentReference[oaicite:4]{index=4}
```

[1]: https://raw.githubusercontent.com/syarief02/lesengen/main/LICENSE "raw.githubusercontent.com"

